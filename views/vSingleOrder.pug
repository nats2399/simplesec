extends layout

block content
    script(src="http://code.jquery.com/jquery-3.1.0.min.js")
    script(src="/utils.js")
    .jumbotron.text-center.registrationTitle
        .div
            p #{title} #{session.role}
        .div.dashboardbutton
            if session.role=='Employee'
                .btn-group.btn-groupe_2
                    a.btn.btn-honey_flower(type='button' href="/employeeIndex") Dashboard
                    a.btn.btn-honey_flower_2(type='button')
                        span.glyphicon.glyphicon-dashboard
            else if session.role=='Supervisor'
                .btn-group.btn-groupe_2
                    a.btn.btn-honey_flower(type='button' href="/supervisorIndex") Dashboard
                    a.btn.btn-honey_flower_2(type='button')
                        span.glyphicon.glyphicon-dashboard
            else if session.role=='ordersupervisor'
                .btn-group.btn-groupe_2
                    a.btn.btn-honey_flower(type='button' href="/ordersDeptIndex") Dashboard
                    a.btn.btn-honey_flower_2(type='button')
                        span.glyphicon.glyphicon-dashboard
    - var n=0, orderid=0, totalCost=0, show='show';
    - var btnType = 'info';
    - var btnSize = 'lg';
   
    .row
        .col-2
        .col-8.orderdisplay
            each order in orderdetails
                div(id="headingOne"+n class="card-header")
                    h2.mb-0
                    button.btn.btn-link(type='button' data-toggle='collapse' data-target='#collapse'+n aria-expanded='true' aria-controls='collapse'+n)
                    b Order #                   
                    | #{order[0].oOrderID}            &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp &nbsp &nbsp 
                    b By:  
                    | #{order[0].oFirstName}  #{order[0].oLastName}              &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp &nbsp &nbsp
                    b Status:  
                    | #{order[0].oOrderStatus}           
                div(id="collapse"+n class="collapse "+show aria-labelledby="heading"+n data-parent='#accordionExample')
                    div.row
                        div.col 
                            b Ordered by:
                        div.col 
                            | #{order[0].oFirstName}  #{order[0].oLastName} 
                        div.col 
                            b Department Name:
                        div.col 
                            | #{order[0].oDeptName}
                    div.row
                        div.col 
                            b Role Name:
                        div.col 
                            | #{order[0].oRoleName} 
                        div.col 
                            b Order Status:
                        div.col 
                            | #{order[0].oOrderStatus}
                    div.row
                        div.col 
                            b Shipping Address:
                        div.col 
                            | #{order[0].oShippingAddress} 
                        div.col 
                            b Total Amount: 
                        div.col 
                            | $ #{order[0].oTotalCost}
                    br
                    - var x=0
                    | List of items in the order
                    table.table.table-striped
                        thead
                            tr
                                th(scope='col') #
                                th(scope='col') Order ID
                                th(scope='col') Product ID
                                th(scope='col') Product Name
                                th(scope='col') Quantity
                                th(scope='col') Unit Price
                                th(scope='col') Supplier Name
                        tbody
                            each od in order
                                tr
                                    th(scope='row') #{++x}
                                    td #{od.oOrderID}  
                                    td #{od.oProductID}  
                                    td #{od.oProductName}  
                                    td #{od.oQuantity}  
                                    td $ #{od.oUnitPrice}  
                                    td #{od.oSupplierName}  
                    div#results
                    if session.role == 'Supervisor'
                        .row
                            .col-4.text-center
                                
                            .col-4.text-center
                                a(class='btn submitbutton btn-' + btnType + ' btn-' + btnSize  href='/supervisor/order/approve/'+order[0].oOrderID) Verify and Sign 
                            .col-4.text-center
                                a(class='btn cancelbutton btn-' + btnType + ' btn-' + btnSize  href='/orders/getOrders') Go Back
                             
                    if session.role == 'ordersupervisor'
                        .row
                            .col-3
                            .col-3
                                a(class='btn btn-' + btnType + ' btn-' + btnSize  href='/orders/getOrders') Go Back 
                            .col-3 
                                a(class='btn btn-' + btnType + ' btn-' + btnSize  href='/orders/change?orderId='+order[0].oOrderID) Verify and Shipped 
                            .col-3 

                    if session.role == 'Employee'
                        .row
                            .col-3
                            .col-3
                                if order[0].oOrderStatus == 'In Process'
                                    a(class='btn btn-' + btnType + ' btn-' + btnSize  href='/order/add?orderId='+order[0].oOrderID) Edit Order 
                            .col-3 
                                a(class='btn btn-' + btnType + ' btn-' + btnSize  href='/orders/getOrders') Go Back 
                    br
            - n++
            -show = '';
        br
        br
    .row
        .col-2 
        .col-8
        
    br

    


